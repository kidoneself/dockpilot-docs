# 热更新

DockPilot 支持在线热更新功能，无需重新部署容器即可升级到最新版本，保证服务的连续性。

## 功能特点

### 无缝更新
- 在线检测更新
- 一键升级到最新版本
- 保持容器运行状态
- 零停机时间更新

### 版本管理
- 版本历史记录
- 回滚到历史版本
- 版本对比功能
- 更新日志查看

### 安全更新
- 数字签名验证
- 增量更新支持
- 备份配置文件
- 失败自动回滚

## 更新流程

### 自动更新
1. **检查更新**：系统定期检查最新版本
2. **下载更新包**：在后台下载更新文件
3. **验证签名**：确保更新包的安全性
4. **应用更新**：热替换应用程序文件
5. **验证功能**：确认更新成功

### 手动更新
1. 点击界面右上角的更新按钮
2. 系统检测可用更新
3. 显示更新内容和版本信息
4. 确认更新并等待完成
5. 验证新版本功能

## 更新内容

### 前端更新
- 界面优化和新功能
- 交互体验改进
- 安全漏洞修复
- 性能优化

### 后端更新
- API 功能增强
- 数据库结构优化
- 安全策略升级
- 稳定性改进

### 配置更新
- 默认设置优化
- 新配置选项
- 兼容性改进
- 性能调优

## 使用方法

### 开启自动更新
```json
{
  "auto_update": {
    "enabled": true,
    "check_interval": "24h",
    "update_channel": "stable",
    "backup_before_update": true
  }
}
```

### 手动触发更新
```bash
# 检查更新
curl -X GET http://localhost:8888/api/update/check

# 执行更新
curl -X POST http://localhost:8888/api/update/apply
```

### 回滚版本
```bash
# 查看版本历史
curl -X GET http://localhost:8888/api/update/history

# 回滚到指定版本
curl -X POST http://localhost:8888/api/update/rollback \
  -H "Content-Type: application/json" \
  -d '{"version": "v1.0.1"}'
```

## 高级配置

### 更新策略
- **立即更新**：检测到更新立即应用
- **计划更新**：在指定时间执行更新
- **手动更新**：需要手动确认才执行
- **测试更新**：先在测试环境验证

### 更新通道
- **stable**：稳定版本，推荐生产环境
- **beta**：测试版本，包含新功能
- **alpha**：开发版本，最新特性

### 备份设置
- 更新前自动备份
- 保留多个备份版本
- 定期清理旧备份
- 恢复备份数据

## 注意事项

### 更新前准备
- 检查磁盘空间
- 备份重要数据
- 确认网络连接
- 关闭不必要的进程

### 更新期间
- 避免进行其他操作
- 保持网络连接稳定
- 不要强制关闭程序
- 监控更新进度

### 更新后验证
- 检查功能正常性
- 验证数据完整性
- 测试关键功能
- 查看错误日志

## 故障排除

### 更新失败
- 检查网络连接
- 确认磁盘空间
- 查看错误日志
- 尝试手动更新

### 功能异常
- 重启应用服务
- 检查配置文件
- 查看系统日志
- 联系技术支持

### 回滚操作
- 选择稳定版本
- 确认回滚操作
- 验证功能正常
- 重新配置参数

::: tip 提示
- 建议在非高峰期进行更新
- 生产环境建议先在测试环境验证
- 保持定期备份的习惯
- 关注更新日志和安全公告
:::

::: warning 警告
- 更新过程中请勿断电或强制关闭
- 确保有足够的磁盘空间
- 重要环境建议手动控制更新时机
::: 